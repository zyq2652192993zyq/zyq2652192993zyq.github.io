<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>1444.Number of Ways of Cutting a Pizza | Kylin</title>
<meta name="description" content="Talk is cheap, show me the code.">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://zyq2652192993zyq.github.io//favicon.ico?v=1589275598906">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://zyq2652192993zyq.github.io//styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://zyq2652192993zyq.github.io/">
        <img src="https://zyq2652192993zyq.github.io//images/avatar.png?v=1589275598906" class="site-logo">
        <h1 class="site-title">Kylin</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="https://github.com/zyq2652192993zyq" class="site-nav" target="_blank">
            GitHub
          </a>
        
      
        
          <a href="https://zyq2652192993zyq.github.io/" class="site-nav">
            首页
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      Talk is cheap, show me the code.
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://zyq2652192993zyq.github.io//atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">1444.Number of Ways of Cutting a Pizza</h2>
            <div class="post-date">2020-05-10</div>
            
            <div class="post-content">
              <p><strong>文中提到的题目可在我GitHub的<a href="https://github.com/zyq2652192993zyq/LeetCode">LeetCode</a>, <a href="https://github.com/zyq2652192993zyq/SJTU-Online-Judge">SJTU OJ</a>, <a href="https://github.com/zyq2652192993zyq/Advance-Algorithm/tree/master/Algorithm%20Analysis">Algorithm Analysis</a>, <a href="https://github.com/zyq2652192993zyq/Advance-Algorithm/tree/master/Problem%20Solution">Problem Solution</a>找到解答。</strong></p>
<p>Tags: <code>Hard</code> <code>Dynamic Programming</code></p>
<p>Links: https://leetcode.com/problems/number-of-ways-of-cutting-a-pizza/</p>
<hr>
<p>Given a rectangular pizza represented as a <code>rows x cols</code> matrix containing the following characters: <code>'A'</code> (an apple) and <code>'.'</code> (empty cell) and given the integer <code>k</code>. You have to cut the pizza into <code>k</code> pieces using <code>k-1</code> cuts.</p>
<p>For each cut you choose the direction: vertical or horizontal, then you choose a cut position at the cell boundary and cut the pizza into two pieces. If you cut the pizza vertically, give the left part of the pizza to a person. If you cut the pizza horizontally, give the upper part of the pizza to a person. Give the last piece of pizza to the last person.</p>
<p><em>Return the number of ways of cutting the pizza such that each piece contains <strong>at least</strong> one apple.</em> Since the answer can be a huge number, return this modulo 10^9 + 7.</p>
<p><strong>Example 1:</strong></p>
<p><strong><img src="https://assets.leetcode.com/uploads/2020/04/23/ways_to_cut_apple_1.png" alt="img" loading="lazy"></strong></p>
<pre><code>Input: pizza = [&quot;A..&quot;,&quot;AAA&quot;,&quot;...&quot;], k = 3
Output: 3 
Explanation: The figure above shows the three ways to cut the pizza. Note that pieces must contain at least one apple.
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code>Input: pizza = [&quot;A..&quot;,&quot;AA.&quot;,&quot;...&quot;], k = 3
Output: 1
</code></pre>
<p><strong>Example 3:</strong></p>
<pre><code>Input: pizza = [&quot;A..&quot;,&quot;A..&quot;,&quot;...&quot;], k = 1
Output: 1
</code></pre>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= rows, cols &lt;= 50</code></li>
<li><code>rows == pizza.length</code></li>
<li><code>cols == pizza[i].length</code></li>
<li><code>1 &lt;= k &lt;= 10</code></li>
<li><code>pizza</code> consists of characters <code>'A'</code> and <code>'.'</code> only.</li>
</ul>
<hr>
<p>无论横切还是竖切，每次都需要统计右下角剩余部分的苹果数，所以需要进行预处理，用二维数组<code>appleNum</code>记录左上角的苹果数，询问右下角的苹果数时通过函数<code>calculate</code><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>得到。如果对于这种方法有疑问，可以通过LeetCode 304.Range Sum Query 2D - Immutable体会。</p>
<p>深搜遍历所有可能的切割方案，用数组<code>d[i][j][k]</code>表示从右下角向上<code>i</code>行，向前<code>j</code>列，切成<code>k</code>块的方案数。初始化为-1，如果搜索中发现<code>d[i][j][k]</code>不为-1，代表此种情况已经计算过了。</p>
<pre><code class="language-c++">class Solution {
    vector&lt;vector&lt;int&gt;&gt; appleNum;
    static const int MODE = 1e9 + 7;
    vector&lt;vector&lt;vector&lt;int&gt;&gt;&gt; d;
    int m, n; //行数和列数


public:
    int ways(vector&lt;string&gt;&amp; pizza, int k) {
        std::ios_base::sync_with_stdio(false);
        cin.tie(NULL);
        cout.tie(NULL);

        appleNum.resize(55, vector&lt;int&gt;(55, 0));
        d.resize(55, vector&lt;vector&lt;int&gt;&gt;(55, vector&lt;int&gt;(15, -1)));
        m = pizza.size(), n = pizza[0].size();
        prePorcess(pizza);

        return DFS(m, n, k);
    }

    //预处理计算当前点到矩阵左上角的苹果数量
    void prePorcess(vector&lt;string&gt;&amp; pizza)
    {
        for (int i = 1; i &lt;= m; ++i) {
            for (int j = 1; j &lt;= n; ++j) {
                appleNum[i][j] = appleNum[i - 1][j] + appleNum[i][j - 1] - appleNum[i - 1][j - 1];
                if (pizza[i - 1][j - 1] == 'A') ++appleNum[i][j];
            }
        }
    }

    //计算从右下角向上rowNum行，向前colNum列的苹果数量
    inline int calculate(int rowNum, int colNum)
    {
        return appleNum[m][n] - appleNum[m - rowNum][n] - appleNum[m][n - colNum] + appleNum[m - rowNum][n - colNum];
    }

    //深搜右下角向上rowNum行，向前colNum列，分成k份的方案数
    int DFS(int rowNum, int colNum, int k)
    {
        //如果剩余的情况已经计算过了
        if (d[rowNum][colNum][k] != -1) return d[rowNum][colNum][k];

        //计算右下角剩余的苹果数
        int cnt = calculate(rowNum, colNum);
        //剩余苹果不够k个，无法继续划分
        if (cnt &lt; k) return d[rowNum][colNum][k] = 0;
        //剩余部分划分成1份，只有一种方案
        if (k == 1) return d[rowNum][colNum][k] = 1;

        d[rowNum][colNum][k] = 0;
        //横着切
        for (int i = 1; i &lt; rowNum; ++i) {
            //必须保证切分的上半部分有苹果
            if (cnt == calculate(rowNum - i, colNum)) continue;
            d[rowNum][colNum][k] = (d[rowNum][colNum][k] + DFS(rowNum - i, colNum, k - 1)) % MODE;
        }

        //竖着切
        for (int i = 1; i &lt; colNum; ++i) {
            //必须保证切分的左半部分有苹果
            if (cnt == calculate(rowNum, colNum - i)) continue;
            d[rowNum][colNum][k] = (d[rowNum][colNum][k] + DFS(rowNum, colNum - i, k - 1)) % MODE;
        }

        return d[rowNum][colNum][k];
    }
};
</code></pre>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://zyq2652192993zyq.github.io/tag/_8GDojNMV/" class="tag">
                    LeetCode
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://zyq2652192993zyq.github.io/post/1437longest-continuous-subarray-with-absolute-diff-less-than-or-equal-to-limit/">
                  <h3 class="post-title">
                    1437.Longest Continuous Subarray With Absolute Diff Less Than or Equal to Limit
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
