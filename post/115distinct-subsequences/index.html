<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>115.Distinct Subsequences | Kylin</title>
<meta name="description" content="Talk is cheap, show me the code.">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://zyq2652192993zyq.github.io//favicon.ico?v=1589777991846">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://zyq2652192993zyq.github.io//styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://zyq2652192993zyq.github.io/">
        <img src="https://zyq2652192993zyq.github.io//images/avatar.png?v=1589777991846" class="site-logo">
        <h1 class="site-title">Kylin</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="https://github.com/zyq2652192993zyq" class="site-nav" target="_blank">
            GitHub
          </a>
        
      
        
          <a href="https://zyq2652192993zyq.github.io/" class="site-nav">
            首页
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      Talk is cheap, show me the code.
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://zyq2652192993zyq.github.io//atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">115.Distinct Subsequences</h2>
            <div class="post-date">2020-04-28</div>
            
            <div class="post-content">
              <p><strong>文中提到的题目可在我GitHub的<a href="https://github.com/zyq2652192993zyq/LeetCode">LeetCode</a>, <a href="https://github.com/zyq2652192993zyq/SJTU-Online-Judge">SJTU OJ</a>, <a href="https://github.com/zyq2652192993zyq/Advance-Algorithm/tree/master/Algorithm%20Analysis">Algorithm Analysis</a>, <a href="https://github.com/zyq2652192993zyq/Advance-Algorithm/tree/master/Problem%20Solution">Problem Solution</a>找到解答。</strong></p>
<p>Tags: <code>Hard</code> <code>Dynamic Programming</code></p>
<p>Links: https://leetcode.com/problems/distinct-subsequences/</p>
<hr>
<p>Given a string <strong>S</strong> and a string <strong>T</strong>, count the number of distinct subsequences of <strong>S</strong> which equals <strong>T</strong>.</p>
<p>A subsequence of a string is a new string which is formed from the original string by deleting some (can be none) of the characters without disturbing the relative positions of the remaining characters. (ie, <code>&quot;ACE&quot;</code> is a subsequence of <code>&quot;ABCDE&quot;</code> while <code>&quot;AEC&quot;</code> is not).</p>
<p>It's guaranteed the answer fits on a 32-bit signed integer.</p>
<p><strong>Example 1:</strong></p>
<pre><code>Input: S = &quot;rabbbit&quot;, T = &quot;rabbit&quot;
Output: 3
Explanation:
As shown below, there are 3 ways you can generate &quot;rabbit&quot; from S.
(The caret symbol ^ means the chosen letters)

rabbbit
^^^^ ^^
rabbbit
^^ ^^^^
rabbbit
^^^ ^^^
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code>Input: S = &quot;babgbag&quot;, T = &quot;bag&quot;
Output: 5
Explanation:
As shown below, there are 5 ways you can generate &quot;bag&quot; from S.
(The caret symbol ^ means the chosen letters)

babgbag
^^ ^
babgbag
^^    ^
babgbag
^    ^^
babgbag
  ^  ^^
babgbag
    ^^^
</code></pre>
<hr>
<h1 id="解法一动态规划">解法一：动态规划</h1>
<pre><code class="language-c++">class Solution {
public:
    int numDistinct(string s, string t) {
        std::ios_base::sync_with_stdio(false);
        cin.tie(NULL);
        cout.tie(NULL);

        int m = s.size(), n = t.size();
        vector&lt;vector&lt;long long&gt;&gt; d(m + 1, vector&lt;long long&gt;(n + 1, 0));
        d[0][0] = 1;
        int cnt = 0;
        for (int i = 1; i &lt;= m; ++i) {
        	if (s[i - 1] == t[0]) ++cnt;
        	d[i][1] = cnt;
        }

        for (int i = 1; i &lt;= m; ++i) {
            for (int j = 2; j &lt;= i &amp;&amp; j &lt;= n; ++j) {
                if (s[i - 1] == t[j - 1]) d[i][j] = d[i - 1][j - 1] + d[i - 1][j];
                else d[i][j] = d[i - 1][j];
            }
        }

        return d[m][n];
    }
};
</code></pre>
<p>题目的意思是给定字符串<code>s</code>和<code>t</code>，问在<code>s</code>中不连续的子串中有多少个和<code>t</code>完全匹配，本质上还是一个匹配问题。</p>
<p>首先思考连续的时候是怎么处理，很显然字符串哈希和KMP都可以解决，不连续情况多半就是动态规划了。</p>
<p>用<code>d[i][j]</code>表示<code>s</code>的前<code>i</code>个字符包含<code>t</code>前<code>j</code>个字符的个数，状态转移方程需要考虑<code>s</code>的第<code>i</code>个字符和<code>t</code>的第<code>j</code>个字符是否匹配。</p>
<ul>
<li>
<p>如果<code>s[i - 1] != t[j - 1]</code>，那么那么只能是前<code>i-1</code>个字符和<code>t</code>的前<code>j</code>个字符进行计算，所以<code>d[i][j] = d[i-1][j]</code>。</p>
</li>
<li>
<p>如果匹配，那么存在如下例子</p>
</li>
</ul>
<pre><code>第一个例子
s = abb
t = ab
很显然出现次数是2

第二个例子
s = aab
t = ab
很显然出现次数是2
</code></pre>
<p>所以<code>s[i - 1] == t[j - 1]</code>的时候存在两种情况：</p>
<ol>
<li><code>s[i - 1]</code>和<code>t[j - 1]</code>完成匹配，于是只需要计算<code>d[i-1][j-1]</code>，第二个例子</li>
<li><code>s[i-1]</code>属于重复的部分，第一个例子，那么需要计算<code>d[i - 1][j]</code></li>
</ol>
<p>所以<code>d[i][j]</code>就是两种情况的总和。</p>
<p>接下来就是很重要的初始化过程了，对于很多情况，比如<code>d[0][0]</code>究竟该怎么初始化会存在一些疑惑，那么最简单的判断方法就是举个例子，看看自己循环里是否会使用到<code>d[0][0]</code>，以及<code>d[0][0]</code>对程序的影响，那么就很容易判断<code>d[0][0] =1</code>还是0了。需要对<code>t</code>里的第一个字符进行特判。</p>
<p>另外最开始自己把14行的程序放在了<code>if</code>条件里面，下面这个样例就会错误：</p>
<pre><code>s = aabb
t = ab
结果为4
</code></pre>
<p>如果把14行放在<code>if</code>里面，结果就是2，原因在于当<code>s</code>的第一个<code>b</code>和<code>t</code>里的<code>a</code>计算时，无法完成匹配，会让对应的<code>d[3][1]= 0</code>，但是实际上应为2。</p>
<p>另外还有一个测试用例发生错误是可能存在数据溢出问题，比如这个例子：</p>
<pre><code>&quot;xslledayhxhadmctrliaxqpokyezcfhzaskeykchkmhpyjipxtsuljkwkovmvelvwxzwieeuqnjozrfwmzsylcwvsthnxujvrkszqwtglewkycikdaiocglwzukwovsghkhyidevhbgffoqkpabthmqihcfxxzdejletqjoxmwftlxfcxgxgvpperwbqvhxgsbbkmphyomtbjzdjhcrcsggleiczpbfjcgtpycpmrjnckslrwduqlccqmgrdhxolfjafmsrfdghnatexyanldrdpxvvgujsztuffoymrfteholgonuaqndinadtumnuhkboyzaqguwqijwxxszngextfcozpetyownmyneehdwqmtpjloztswmzzdzqhuoxrblppqvyvsqhnhryvqsqogpnlqfulurexdtovqpqkfxxnqykgscxaskmksivoazlducanrqxynxlgvwonalpsyddqmaemcrrwvrjmjjnygyebwtqxehrclwsxzylbqexnxjcgspeynlbmetlkacnnbhmaizbadynajpibepbuacggxrqavfnwpcwxbzxfymhjcslghmajrirqzjqxpgtgisfjreqrqabssobbadmtmdknmakdigjqyqcruujlwmfoagrckdwyiglviyyrekjealvvigiesnvuumxgsveadrxlpwetioxibtdjblowblqvzpbrmhupyrdophjxvhgzclidzybajuxllacyhyphssvhcffxonysahvzhzbttyeeyiefhunbokiqrpqfcoxdxvefugapeevdoakxwzykmhbdytjbhigffkmbqmqxsoaiomgmmgwapzdosorcxxhejvgajyzdmzlcntqbapbpofdjtulstuzdrffafedufqwsknumcxbschdybosxkrabyfdejgyozwillcxpcaiehlelczioskqtptzaczobvyojdlyflilvwqgyrqmjaeepydrcchfyftjighntqzoo&quot;
&quot;rwmimatmhydhbujebqehjprrwfkoebcxxqfktayaaeheys&quot;
结果为543744000，超出INT_MAX
</code></pre>
<p>所以涉及到加法以及计数的时候，还是要考虑以下数据溢出问题。</p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://zyq2652192993zyq.github.io/tag/_8GDojNMV/" class="tag">
                    LeetCode
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://zyq2652192993zyq.github.io/post/97interleaving-string/">
                  <h3 class="post-title">
                    97.Interleaving String
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
