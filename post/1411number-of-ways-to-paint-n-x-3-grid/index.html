<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>1411.Number of Ways to Paint N × 3 Grid | Kylin</title>
<meta name="description" content="Talk is cheap, show me the code.">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://zyq2652192993zyq.github.io//favicon.ico?v=1588146938074">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://zyq2652192993zyq.github.io//styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://zyq2652192993zyq.github.io/">
        <img src="https://zyq2652192993zyq.github.io//images/avatar.png?v=1588146938074" class="site-logo">
        <h1 class="site-title">Kylin</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="https://github.com/zyq2652192993zyq" class="site-nav" target="_blank">
            GitHub
          </a>
        
      
        
          <a href="https://zyq2652192993zyq.github.io/" class="site-nav">
            首页
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      Talk is cheap, show me the code.
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://zyq2652192993zyq.github.io//atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">1411.Number of Ways to Paint N × 3 Grid</h2>
            <div class="post-date">2020-04-28</div>
            
            <div class="post-content">
              <p><strong>文中提到的题目可在我GitHub的<a href="https://github.com/zyq2652192993zyq/LeetCode">LeetCode</a>, <a href="https://github.com/zyq2652192993zyq/SJTU-Online-Judge">SJTU OJ</a>, <a href="https://github.com/zyq2652192993zyq/Advance-Algorithm/tree/master/Algorithm%20Analysis">Algorithm Analysis</a>, <a href="https://github.com/zyq2652192993zyq/Advance-Algorithm/tree/master/Problem%20Solution">Problem Solution</a>找到解答。</strong></p>
<p>Tags: <code>Hard</code> <code>Dynamic Programming</code> <code>Math</code></p>
<p>Links: https://leetcode.com/problems/number-of-ways-to-paint-n-3-grid/</p>
<hr>
<p>You have a <code>grid</code> of size <code>n x 3</code> and you want to paint each cell of the grid with exactly one of the three colours: <strong>Red</strong>, <strong>Yellow</strong> or <strong>Green</strong> while making sure that no two adjacent cells have the same colour (i.e no two cells that share vertical or horizontal sides have the same colour).</p>
<p>You are given <code>n</code> the number of rows of the grid.</p>
<p>Return <em>the number of ways</em> you can paint this <code>grid</code>. As the answer may grow large, the answer <strong>must be</strong> computed modulo <code>10^9 + 7</code>.</p>
<p>![img](F:\Project\LeetCode\Dynamica Programming\e1.png)</p>
<p><strong>Example 1:</strong></p>
<pre><code>Input: n = 1
Output: 12
Explanation: There are 12 possible way to paint the grid as shown:
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code>Input: n = 2
Output: 54
</code></pre>
<p><strong>Example 3:</strong></p>
<pre><code>Input: n = 3
Output: 246
</code></pre>
<p><strong>Example 4:</strong></p>
<pre><code>Input: n = 7
Output: 106494
</code></pre>
<p><strong>Example 5:</strong></p>
<pre><code>Input: n = 5000
Output: 30228214
</code></pre>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>n == grid.length</code></li>
<li><code>grid[i].length == 3</code></li>
<li><code>1 &lt;= n &lt;= 5000</code></li>
</ul>
<hr>
<pre><code class="language-c++">class Solution {
public:
    int numOfWays(int n) {
        std::ios_base::sync_with_stdio(false);
        cin.tie(NULL);
        cout.tie(NULL);
        
        const long long MODE = 1e9 + 7;
        
        long long equal = 6, notEqual = 6;
        if (n == 1) return 12;
        long long res;
        for (int i = 2; i &lt;= n; ++i) {
            res = (equal * 5 % MODE + notEqual * 4 % MODE) % MODE;
            long long a = equal, b = notEqual;
            equal = (a * 3 % MODE + b * 2 % MODE) % MODE;
            notEqual = (a * 2 % MODE + b * 2 % MODE) % MODE;
        }

        return res;
    }
};
</code></pre>
<p>假设三种颜色用ABC分别表示，那么当<code>n = 1</code>的时候，有<code>3 * 2 * 2 = 12</code>种，当<code>n = 2</code>的时候，前一种的排列方式会对后面产生影响，仅仅以假设第一行的前两个染色为<code>AB</code>，考察后面的染色：</p>
<pre><code>如果第一行最后一个和第一行第一个同色，即ABA
那么第二行可能的染色方案是：
BAB	BAC	CAB	CAC	BCB

如果第一行最后一个的染色和第一行第一个不是同色，
那么第二行可能的染色方案是：
BCA	BCB BAB CAB
</code></pre>
<p>这时候发现规律，如果第二行出现<code>BAB</code>，那么和第一行出现<code>ABA</code>所得结果种类是一样的，于是发现，<code>n+1</code>的染色方案和第<code>n</code>行最后一个和第<code>n</code>行第一个染色是否同色有关，于是找到规律，每一个同色的方案会产生5种方案，其中3种同色方案和2种不同色方案；每一个不同色方案会产生2种同色方案和2种非同色方案。</p>
<p>经过上面的分析，发现只需要维护每一行同色的方案数量和不同色的方案数量，分别用变量<code>equal</code>和<code>notEqual</code>来维护，则<code>n + 1</code>的方案数是<code>equal * 5 + notEqual * 4</code>，记得更新<code>equal</code>和<code>notEqual</code>的数值，以及可能产生的溢出问题。</p>
<p>另外以染色为背景的题目还有：</p>
<ul>
<li>HDU 2045 不容易系列之(3)—— LELE的RPG难题（染色类型问题）</li>
<li>UVA 11916 - Emoogle Grid（虽然是染色背景，但是考察的是数论）可以和前面两个染色问题关联起来思考。</li>
</ul>

            </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://zyq2652192993zyq.github.io/post/1410html-entity-parser/">
                  <h3 class="post-title">
                    1410.HTML Entity Parser
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
